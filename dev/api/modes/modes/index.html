<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · FluxOptics.jl</title><meta name="title" content="API · FluxOptics.jl"/><meta property="og:title" content="API · FluxOptics.jl"/><meta property="twitter:title" content="API · FluxOptics.jl"/><meta name="description" content="Documentation for FluxOptics.jl."/><meta property="og:description" content="Documentation for FluxOptics.jl."/><meta property="twitter:description" content="Documentation for FluxOptics.jl."/><meta property="og:url" content="https://anscoil.github.io/FluxOptics.jl/api/modes/modes/"/><meta property="twitter:url" content="https://anscoil.github.io/FluxOptics.jl/api/modes/modes/"/><link rel="canonical" href="https://anscoil.github.io/FluxOptics.jl/api/modes/modes/"/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.svg" alt="FluxOptics.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">FluxOptics.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../../tutorials/01_FoxLi_simulation/">FoxLi Simulation</a></li><li><a class="tocitem" href="../../../tutorials/02_field_retrieval/">Field Retrieval</a></li><li><a class="tocitem" href="../../../tutorials/03_RGB_beam_shaping/">Multi-Wavelength Beam Shaping</a></li><li><a class="tocitem" href="../../../tutorials/04_waveguide_tomography/">Waveguide Tomography</a></li></ul></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../../">API Reference</a></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">GridUtils</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../gridutils/">GridUtils</a></li><li><a class="tocitem" href="../../gridutils/gridutils/">API</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox" checked/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Modes</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../">Modes</a></li><li class="is-active"><a class="tocitem" href>API</a><ul class="internal"><li><a class="tocitem" href="#Gaussian-Beam-Modes"><span>Gaussian Beam Modes</span></a></li><li><a class="tocitem" href="#Spatial-Layouts"><span>Spatial Layouts</span></a></li><li><a class="tocitem" href="#Speckle-Generation"><span>Speckle Generation</span></a></li><li><a class="tocitem" href="#Technical-Notes"><span>Technical Notes</span></a></li><li><a class="tocitem" href="#See-Also"><span>See Also</span></a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">Fields</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../fields/">Fields</a></li><li><a class="tocitem" href="../../fields/fields/">API</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-5" type="checkbox"/><label class="tocitem" for="menuitem-3-5"><span class="docs-label">Optical Components</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../optical_components/">Optical Components</a></li><li><input class="collapse-toggle" id="menuitem-3-5-2" type="checkbox"/><label class="tocitem" for="menuitem-3-5-2"><span class="docs-label">Core</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../optical_components/core/">Core</a></li><li><a class="tocitem" href="../../optical_components/core/core/">API</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-5-3" type="checkbox"/><label class="tocitem" for="menuitem-3-5-3"><span class="docs-label">Sources</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../optical_components/sources/">Sources</a></li><li><a class="tocitem" href="../../optical_components/sources/sources/">API</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-5-4" type="checkbox"/><label class="tocitem" for="menuitem-3-5-4"><span class="docs-label">Modulators</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../optical_components/modulators/">Modulators</a></li><li><a class="tocitem" href="../../optical_components/modulators/modulators/">API</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-5-5" type="checkbox"/><label class="tocitem" for="menuitem-3-5-5"><span class="docs-label">Fourier</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../optical_components/fourier/">Fourier</a></li><li><a class="tocitem" href="../../optical_components/fourier/fourier/">API</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-5-6" type="checkbox"/><label class="tocitem" for="menuitem-3-5-6"><span class="docs-label">Utilities</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../optical_components/utilities/">Utilities</a></li><li><a class="tocitem" href="../../optical_components/utilities/utilities/">API</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-5-7" type="checkbox"/><label class="tocitem" for="menuitem-3-5-7"><span class="docs-label">Free-Space Propagators</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../optical_components/freespace/">Free-Space Propagators</a></li><li><a class="tocitem" href="../../optical_components/freespace/freespace/">API</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-5-8" type="checkbox"/><label class="tocitem" for="menuitem-3-5-8"><span class="docs-label">Bulk Propagators</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../optical_components/bulk/">Bulk Propagators</a></li><li><a class="tocitem" href="../../optical_components/bulk/bulk/">API</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-5-9" type="checkbox"/><label class="tocitem" for="menuitem-3-5-9"><span class="docs-label">Active Media</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../optical_components/active/">Active Media</a></li><li><a class="tocitem" href="../../optical_components/active/active_media/">API</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-5-10" type="checkbox"/><label class="tocitem" for="menuitem-3-5-10"><span class="docs-label">System</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../optical_components/system/">System</a></li><li><a class="tocitem" href="../../optical_components/system/system/">API</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-6" type="checkbox"/><label class="tocitem" for="menuitem-3-6"><span class="docs-label">OptimisersExt</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../optimisers/">OptimisersExt</a></li><li><a class="tocitem" href="../../optimisers/optimisers/">API</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-7" type="checkbox"/><label class="tocitem" for="menuitem-3-7"><span class="docs-label">Metrics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../metrics/">Metrics</a></li><li><a class="tocitem" href="../../metrics/metrics/">API</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-8" type="checkbox"/><label class="tocitem" for="menuitem-3-8"><span class="docs-label">Plotting</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../plotting/">Plotting</a></li><li><a class="tocitem" href="../../plotting/plotting/">API</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Reference</a></li><li><a class="is-disabled">Modes</a></li><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/anscoil/FluxOptics.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/anscoil/FluxOptics.jl/blob/main/docs/src/api/modes/modes.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Modes-API"><a class="docs-heading-anchor" href="#Modes-API">Modes API</a><a id="Modes-API-1"></a><a class="docs-heading-anchor-permalink" href="#Modes-API" title="Permalink"></a></h1><h2 id="Gaussian-Beam-Modes"><a class="docs-heading-anchor" href="#Gaussian-Beam-Modes">Gaussian Beam Modes</a><a id="Gaussian-Beam-Modes-1"></a><a class="docs-heading-anchor-permalink" href="#Gaussian-Beam-Modes" title="Permalink"></a></h2><h3 id="Gaussian-Beams"><a class="docs-heading-anchor" href="#Gaussian-Beams">Gaussian Beams</a><a id="Gaussian-Beams-1"></a><a class="docs-heading-anchor-permalink" href="#Gaussian-Beams" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FluxOptics.Modes.Gaussian1D" href="#FluxOptics.Modes.Gaussian1D"><code>FluxOptics.Modes.Gaussian1D</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Gaussian1D(w0::Real; norm_constant=nothing)
Gaussian1D(w0::Real, λ::Real, z::Real; constant_phase=true, norm_constant=nothing)</code></pre><p>Create a one-dimensional Gaussian mode.</p><p>The first form creates a Gaussian at the beam waist, while the second includes propagation effects at distance <code>z</code> from the waist.</p><p><strong>Arguments</strong></p><ul><li><code>w0::Real</code>: Beam waist radius</li><li><code>λ::Real</code>: Wavelength (for propagated version)</li><li><code>z::Real</code>: Propagation distance from waist (for propagated version)</li><li><code>constant_phase=true</code>: Include exp(ikz) phase factor</li><li><code>norm_constant=nothing</code>: Custom normalization constant - defines the peak intensity (default uses proper Gaussian normalization)</li></ul><p><strong>Returns</strong></p><p><code>Gaussian1D</code> mode that can be evaluated at spatial positions.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; g = Gaussian1D(10.0);  # 10 μm waist at focus

julia&gt; nx = 40;  # 40 points

julia&gt; dx = 4.0;  # in µm

julia&gt; x, = spatial_vectors(40, dx);

julia&gt; amplitudes = g(x);

julia&gt; isapprox(sum(abs2, amplitudes) * dx, 1)  # Normalization to 1 by default
true

julia&gt; g_prop = Gaussian1D(10.0, 1.064, 1000.0);  # Propagated 1 mm

julia&gt; amplitudes_prop = g_prop(x);

julia&gt; isapprox(sum(abs2, amplitudes_prop) * dx, 1; atol=1e-5)
true</code></pre><p>See also: <a href="#FluxOptics.Modes.HermiteGaussian1D"><code>HermiteGaussian1D</code></a>, <a href="#FluxOptics.Modes.Gaussian"><code>Gaussian</code></a>, <a href="#FluxOptics.Modes.HermiteGaussian"><code>HermiteGaussian</code></a>, <a href="#FluxOptics.Modes.LaguerreGaussian"><code>LaguerreGaussian</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/anscoil/FluxOptics.jl/blob/87b5c0c2a01b36b3301ef5f08d149dcaccb07d0c/src/modes/gaussian_modes.jl#L38-L81">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FluxOptics.Modes.Gaussian" href="#FluxOptics.Modes.Gaussian"><code>FluxOptics.Modes.Gaussian</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Gaussian(w0::Real; norm_constant=nothing)
Gaussian(w0x::Real, w0y::Real; norm_constant=nothing)
Gaussian(w0::Real, λ::Real, z::Real; constant_phase=true, norm_constant=nothing)
Gaussian(w0x::Real, w0y::Real, λ::Real, z::Real; constant_phase=true, norm_constant=nothing)</code></pre><p>Create a two-dimensional Gaussian mode.</p><p><strong>Arguments</strong></p><ul><li><code>w0::Real</code>: Beam waist radius for circular beam</li><li><code>w0x::Real, w0y::Real</code>: Beam waist radii in x and y directions for elliptical beam</li><li><code>λ::Real</code>: Wavelength (for propagated version)</li><li><code>z::Real</code>: Propagation distance from waist (for propagated version)</li><li><code>constant_phase=true</code>: Include exp(ikz) phase factor</li><li><code>norm_constant=nothing</code>: Custom normalization constant - defines the peak intensity (default uses proper Gaussian normalization)</li></ul><p><strong>Returns</strong></p><p><code>Gaussian</code> mode that can be evaluated at spatial coordinates.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; g = Gaussian(10.0);  # Circular beam, 50 μm waist

julia&gt; nx, ny = 64, 64;

julia&gt; dx, dy = 4.0, 4.0;

julia&gt; xv, yv = spatial_vectors(nx, ny, dx, dy);

julia&gt; field = zeros(ComplexF64, nx, ny);

julia&gt; g(field, xv, yv);  # Evaluate on grid (in-place)

julia&gt; isapprox(sum(abs2, field) * dx * dy, 1)  # Check normalization
true

julia&gt; g_ellip = Gaussian(10.0, 20.0, 1.064, 1000.0);  # Elliptical beam, wavelength 1.064 µm, propagated 1 mm

julia&gt; field_ellip = g_ellip(xv, yv);  # Direct evaluation (out-of-place)

julia&gt; isapprox(sum(abs2, field_ellip) * dx * dy, 1)
true</code></pre><p>See also: <a href="#FluxOptics.Modes.HermiteGaussian"><code>HermiteGaussian</code></a>, <a href="#FluxOptics.Modes.LaguerreGaussian"><code>LaguerreGaussian</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/anscoil/FluxOptics.jl/blob/87b5c0c2a01b36b3301ef5f08d149dcaccb07d0c/src/modes/gaussian_modes.jl#L134-L179">source</a></section></article><h3 id="Hermite-Gaussian-Modes"><a class="docs-heading-anchor" href="#Hermite-Gaussian-Modes">Hermite-Gaussian Modes</a><a id="Hermite-Gaussian-Modes-1"></a><a class="docs-heading-anchor-permalink" href="#Hermite-Gaussian-Modes" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FluxOptics.Modes.HermiteGaussian1D" href="#FluxOptics.Modes.HermiteGaussian1D"><code>FluxOptics.Modes.HermiteGaussian1D</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">HermiteGaussian1D(w0::Real, n::Integer)
HermiteGaussian1D(w0::Real, n::Integer, λ::Real, z::Real; constant_phase=true)</code></pre><p>Create a one-dimensional Hermite-Gaussian mode HG_n.</p><p><strong>Arguments</strong></p><ul><li><code>w0::Real</code>: Beam waist radius</li><li><code>n::Integer</code>: Mode number (≥ 0)</li><li><code>λ::Real</code>: Wavelength (for propagated version)</li><li><code>z::Real</code>: Propagation distance from waist (for propagated version)</li><li><code>constant_phase=true</code>: Include exp(ikz) phase factor</li></ul><p><strong>Returns</strong></p><p><code>HermiteGaussian1D</code> mode that can be evaluated at spatial positions.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; hg0 = HermiteGaussian1D(20.0, 0);  # HG_0 (Gaussian)

julia&gt; hg1 = HermiteGaussian1D(20.0, 1);  # HG_1 (first excited mode)

julia&gt; nx = 64;

julia&gt; dx = 2.0;

julia&gt; x, = spatial_vectors(nx, dx);

julia&gt; field0 = hg0(x);

julia&gt; field1 = hg1(x);

julia&gt; isapprox(sum(abs2, field0) * dx, 1)  # Check normalization
true

julia&gt; isapprox(sum(field0 .* conj.(field1)) * dx, 0; atol = 1e-15)  # Orthogonality check
true</code></pre><p>See also: <a href="#FluxOptics.Modes.Gaussian1D"><code>Gaussian1D</code></a>, <a href="#FluxOptics.Modes.Gaussian"><code>Gaussian</code></a>, <a href="#FluxOptics.Modes.HermiteGaussian"><code>HermiteGaussian</code></a>, <a href="#FluxOptics.Modes.LaguerreGaussian"><code>LaguerreGaussian</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/anscoil/FluxOptics.jl/blob/87b5c0c2a01b36b3301ef5f08d149dcaccb07d0c/src/modes/gaussian_modes.jl#L247-L287">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FluxOptics.Modes.HermiteGaussian" href="#FluxOptics.Modes.HermiteGaussian"><code>FluxOptics.Modes.HermiteGaussian</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">HermiteGaussian(w0::Real, m::Integer, n::Integer)
HermiteGaussian(w0x::Real, w0y::Real, m::Integer, n::Integer)
HermiteGaussian(w0::Real, m::Integer, n::Integer, λ::Real, z::Real; constant_phase=true)
HermiteGaussian(w0x::Real, w0y::Real, m::Integer, n::Integer, λ::Real, z::Real; constant_phase=true)</code></pre><p>Create a two-dimensional Hermite-Gaussian mode HG_{m,n}.</p><p><strong>Arguments</strong></p><ul><li><code>w0::Real</code>: Beam waist radius for circular beam</li><li><code>w0x::Real, w0y::Real</code>: Beam waist radii in x and y directions</li><li><code>m::Integer, n::Integer</code>: Mode numbers in x and y directions (≥ 0)</li><li><code>λ::Real</code>: Wavelength (for propagated version)</li><li><code>z::Real</code>: Propagation distance from waist (for propagated version)</li><li><code>constant_phase=true</code>: Include exp(ikz) phase factor</li></ul><p><strong>Returns</strong></p><p><code>HermiteGaussian</code> mode that can be evaluated at spatial coordinates.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; hg00 = HermiteGaussian(10.0, 0, 0);  # Fundamental mode

julia&gt; hg10 = HermiteGaussian(10.0, 1, 0);  # First excited in x

julia&gt; hg01 = HermiteGaussian(10.0, 0, 1);  # First excited in y

julia&gt; nx, ny = 64, 64;

julia&gt; dx, dy = 2.0, 2.0;

julia&gt; xv, yv = spatial_vectors(nx, ny, dx, dy);

julia&gt; field00 = hg00(xv, yv);

julia&gt; field10 = hg10(xv, yv);

julia&gt; isapprox(sum(abs2, field00) * dx * dy, 1)  # Check normalization
true

julia&gt; isapprox(sum(field00 .* conj.(field10)) * dx * dy, 0; atol = 1e-15)  # Orthogonality
true</code></pre><p>See also: <a href="#FluxOptics.Modes.Gaussian"><code>Gaussian</code></a>, <a href="#FluxOptics.Modes.LaguerreGaussian"><code>LaguerreGaussian</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/anscoil/FluxOptics.jl/blob/87b5c0c2a01b36b3301ef5f08d149dcaccb07d0c/src/modes/gaussian_modes.jl#L329-L374">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FluxOptics.Modes.hermite_gaussian_groups" href="#FluxOptics.Modes.hermite_gaussian_groups"><code>FluxOptics.Modes.hermite_gaussian_groups</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">hermite_gaussian_groups(w0, n_groups::Int)</code></pre><p>Generate all Hermite-Gaussian modes up to a given group number.</p><p>Creates all HGₘₙ modes where m + n &lt; n_groups, ordered by increasing total mode number. This is useful for modal decomposition and beam shaping applications.</p><p><strong>Arguments</strong></p><ul><li><code>w0</code>: Beam waist radius</li><li><code>n_groups::Int</code>: Number of groups to generate</li></ul><p><strong>Returns</strong></p><p>Vector of <code>HermiteGaussian</code> modes.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; modes = hermite_gaussian_groups(10.0, 3);

julia&gt; length(modes)  # Modes: HG_00, HG_10, HG_01, HG_20, HG_11, HG_02
6

julia&gt; nx, ny = 64, 64;

julia&gt; dx, dy = 2.0, 2.0;

julia&gt; xv, yv = spatial_vectors(nx, ny, dx, dy);

julia&gt; fields = [mode(xv, yv) for mode in modes];

julia&gt; all(abs(sum(abs2, field) * dx * dy - 1.0) &lt; 1e-10 for field in fields)  # All normalized
true

julia&gt; modes = hermite_gaussian_groups(10.0, 4);

julia&gt; length(modes)  # Groups 0, 1, 2, 3 give 1+2+3+4 = 10 modes
10</code></pre><p>See also: <a href="#FluxOptics.Modes.Gaussian"><code>Gaussian</code></a>, <a href="#FluxOptics.Modes.HermiteGaussian"><code>HermiteGaussian</code></a>, <a href="#FluxOptics.Modes.LaguerreGaussian"><code>LaguerreGaussian</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/anscoil/FluxOptics.jl/blob/87b5c0c2a01b36b3301ef5f08d149dcaccb07d0c/src/modes/gaussian_modes.jl#L428-L468">source</a></section></article><h3 id="Laguerre-Gaussian-Modes"><a class="docs-heading-anchor" href="#Laguerre-Gaussian-Modes">Laguerre-Gaussian Modes</a><a id="Laguerre-Gaussian-Modes-1"></a><a class="docs-heading-anchor-permalink" href="#Laguerre-Gaussian-Modes" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FluxOptics.Modes.LaguerreGaussian" href="#FluxOptics.Modes.LaguerreGaussian"><code>FluxOptics.Modes.LaguerreGaussian</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LaguerreGaussian(w0::Real, p::Integer, l::Integer; kind=:vortex)
LaguerreGaussian(w0::Real, p::Integer, l::Integer, λ::Real, z::Real; constant_phase=true, kind=:vortex)</code></pre><p>Create a Laguerre-Gaussian mode LGₚₗ.</p><p><strong>Arguments</strong></p><ul><li><code>w0::Real</code>: Beam waist radius</li><li><code>p::Integer</code>: Radial mode number (≥ 0)</li><li><code>l::Integer</code>: Azimuthal mode number (any integer)</li><li><code>λ::Real</code>: Wavelength (for propagated version)</li><li><code>z::Real</code>: Propagation distance from waist (for propagated version)</li><li><code>constant_phase=true</code>: Include exp(ikz) phase factor</li><li><code>kind</code>: Mode type - <code>:vortex</code> (default), <code>:even</code>, or <code>:odd</code><ul><li><code>:vortex</code>: exp(ilφ) phase dependence</li><li><code>:even</code>: cos(lφ) dependence  </li><li><code>:odd</code>: sin(lφ) dependence</li></ul></li></ul><p><strong>Returns</strong></p><p><code>LaguerreGaussian</code> mode that can be evaluated at spatial coordinates.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; lg00 = LaguerreGaussian(10.0, 0, 0);  # Fundamental mode (Gaussian)

julia&gt; lg01 = LaguerreGaussian(10.0, 0, 1);  # Vortex beam

julia&gt; nx, ny = 65, 65;

julia&gt; dx, dy = 2.0, 2.0;

julia&gt; xv, yv = spatial_vectors(nx, ny, dx, dy);

julia&gt; field00 = lg00(xv, yv);

julia&gt; field01 = lg01(xv, yv);

julia&gt; isapprox(sum(abs2, field00) * dx * dy, 1)  # Check normalization
true

julia&gt; abs(field01[nx÷2+1, ny÷2+1]) &lt; 1e-10  # LG_01 has zero at center (vortex)
true

julia&gt; lg_even = LaguerreGaussian(10.0, 0, 2; kind=:even);

julia&gt; field_even = lg_even(xv, yv);

julia&gt; all(isreal, field_even)  # Even modes are real-valued
true</code></pre><p>See also: <a href="#FluxOptics.Modes.Gaussian"><code>Gaussian</code></a>, <a href="#FluxOptics.Modes.HermiteGaussian"><code>HermiteGaussian</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/anscoil/FluxOptics.jl/blob/87b5c0c2a01b36b3301ef5f08d149dcaccb07d0c/src/modes/gaussian_modes.jl#L493-L545">source</a></section></article><h2 id="Spatial-Layouts"><a class="docs-heading-anchor" href="#Spatial-Layouts">Spatial Layouts</a><a id="Spatial-Layouts-1"></a><a class="docs-heading-anchor-permalink" href="#Spatial-Layouts" title="Permalink"></a></h2><h3 id="Layout-Types"><a class="docs-heading-anchor" href="#Layout-Types">Layout Types</a><a id="Layout-Types-1"></a><a class="docs-heading-anchor-permalink" href="#Layout-Types" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FluxOptics.Modes.PointLayout" href="#FluxOptics.Modes.PointLayout"><code>FluxOptics.Modes.PointLayout</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">PointLayout(n, p=(0,0), t=Id2D())</code></pre><p>Create a layout of n identical points.</p><p><strong>Arguments</strong></p><ul><li><code>n</code>: Number of points</li><li><code>p=(0,0)</code>: Position of the point</li><li><code>t=Id2D()</code>: Coordinate transformation</li></ul><p><strong>Returns</strong></p><p><code>PointLayout</code> that can be iterated to get point positions.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; layout = Modes.PointLayout(3, (100.0, 50.0));

julia&gt; positions = collect(layout);

julia&gt; length(positions)
3

julia&gt; all(pos == (100.0, 50.0) for pos in positions)
true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/anscoil/FluxOptics.jl/blob/87b5c0c2a01b36b3301ef5f08d149dcaccb07d0c/src/modes/layouts.jl#L3-L28">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FluxOptics.Modes.GridLayout" href="#FluxOptics.Modes.GridLayout"><code>FluxOptics.Modes.GridLayout</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">GridLayout(nx, ny, px, py, t=Id2D())</code></pre><p>Create a regular rectangular grid layout.</p><p><strong>Arguments</strong></p><ul><li><code>nx, ny</code>: Number of points in x and y directions</li><li><code>px, py</code>: Spacing between points in x and y</li><li><code>t=Id2D()</code>: Coordinate transformation</li></ul><p><strong>Returns</strong></p><p><code>GridLayout</code> that can be iterated to get point positions.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; layout = Modes.GridLayout(2, 3, 100.0, 50.0);

julia&gt; positions = collect(layout);

julia&gt; length(positions)  # 2×3 = 6 points
6

julia&gt; positions[1]  # First point (centered grid)
(-50.0, -50.0)

julia&gt; positions[end]  # Last point
(50.0, 50.0)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/anscoil/FluxOptics.jl/blob/87b5c0c2a01b36b3301ef5f08d149dcaccb07d0c/src/modes/layouts.jl#L51-L79">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FluxOptics.Modes.TriangleLayout" href="#FluxOptics.Modes.TriangleLayout"><code>FluxOptics.Modes.TriangleLayout</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">TriangleLayout(np, px, py, t=Id2D())</code></pre><p>Create a triangular arrangement of points.</p><p><strong>Arguments</strong></p><ul><li><code>np</code>: Number of points along triangle edge</li><li><code>px, py</code>: Spacing between points in x and y</li><li><code>t=Id2D()</code>: Coordinate transformation</li></ul><p><strong>Returns</strong></p><p><code>TriangleLayout</code> with np(np+1)/2 total points.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; layout = Modes.TriangleLayout(3, 100.0, 100.0);

julia&gt; length(layout)  # 3×4/2 = 6 points
6

julia&gt; layout = Modes.TriangleLayout(4, 50.0, 50.0);

julia&gt; length(layout)  # 4×5/2 = 10 points
10</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/anscoil/FluxOptics.jl/blob/87b5c0c2a01b36b3301ef5f08d149dcaccb07d0c/src/modes/layouts.jl#L110-L135">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FluxOptics.Modes.CustomLayout" href="#FluxOptics.Modes.CustomLayout"><code>FluxOptics.Modes.CustomLayout</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CustomLayout(positions, t=Id2D())</code></pre><p>Create a layout from custom list of positions.</p><p><strong>Arguments</strong></p><ul><li><code>positions</code>: Vector of (x,y) tuples specifying point positions</li><li><code>t=Id2D()</code>: Coordinate transformation applied to all positions</li></ul><p><strong>Returns</strong></p><p><code>CustomLayout</code> that can be iterated to get transformed positions.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; positions = [(0.0, 0.0), (100.0, 0.0), (50.0, 86.6)];

julia&gt; layout = Modes.CustomLayout(positions);

julia&gt; collect(layout) == positions
true

julia&gt; layout_rot = Modes.CustomLayout(positions, Rot2D(π/2));

julia&gt; rotated = collect(layout_rot);

julia&gt; all(isapprox.(rotated[2], (0.0, 100.0), atol=1e-12))  # Second point rotated 90°
true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/anscoil/FluxOptics.jl/blob/87b5c0c2a01b36b3301ef5f08d149dcaccb07d0c/src/modes/layouts.jl#L166-L194">source</a></section></article><h3 id="Mode-Stack-Generation"><a class="docs-heading-anchor" href="#Mode-Stack-Generation">Mode Stack Generation</a><a id="Mode-Stack-Generation-1"></a><a class="docs-heading-anchor-permalink" href="#Mode-Stack-Generation" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FluxOptics.Modes.generate_mode_stack" href="#FluxOptics.Modes.generate_mode_stack"><code>FluxOptics.Modes.generate_mode_stack</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">generate_mode_stack(layout, nx, ny, dx, dy, mode; t=Id2D(), normalize=true)
generate_mode_stack(layout, nx, ny, dx, dy, mode_vector; t=Id2D(), normalize=true)
generate_mode_stack(nx, ny, dx, dy, mode_vector; t=Id2D(), normalize=true)</code></pre><p>Generate arrays of optical modes at specified positions.</p><p>The first form replicates the same mode at each layout position. The second form uses different modes from mode_vector at each position. The third form places modes at the origin (single position each).</p><p><strong>Arguments</strong></p><ul><li><code>layout</code>: Spatial layout determining mode positions</li><li><code>nx, ny</code>: Grid size for each mode field</li><li><code>dx, dy</code>: Pixel size</li><li><code>mode</code>: Single mode to replicate at all positions</li><li><code>mode_vector</code>: Vector of modes (one per position)</li><li><code>t=Id2D()</code>: Additional transformation applied to all modes</li><li><code>normalize=true</code>: Normalize each mode to unit power</li></ul><p><strong>Returns</strong></p><p>3D complex array of size (nx, ny, n_modes) containing mode fields.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; layout = Modes.GridLayout(2, 2, 50.0, 50.0);

julia&gt; gaussian = Gaussian(10.0);

julia&gt; modes = generate_mode_stack(layout, 64, 64, 2.0, 2.0, gaussian);

julia&gt; size(modes)
(64, 64, 4)

julia&gt; sum(abs2, modes[:, :, 1]) * 2.0 * 2.0  # Check first mode normalization
1.0000000000000007

julia&gt; hg_modes = [HermiteGaussian(25.0, m, n) for m in 0:1 for n in 0:1];

julia&gt; modes_hg = generate_mode_stack(layout, 64, 64, 2.0, 2.0, hg_modes);

julia&gt; size(modes_hg)
(64, 64, 4)

julia&gt; lg_modes = [LaguerreGaussian(20.0, 0, l) for l in 0:2];

julia&gt; modes_lg = generate_mode_stack(64, 64, 2.0, 2.0, lg_modes);

julia&gt; size(modes_lg)  # No layout specified, modes at origin
(64, 64, 3)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/anscoil/FluxOptics.jl/blob/87b5c0c2a01b36b3301ef5f08d149dcaccb07d0c/src/modes/layouts.jl#L217-L268">source</a></section></article><h2 id="Speckle-Generation"><a class="docs-heading-anchor" href="#Speckle-Generation">Speckle Generation</a><a id="Speckle-Generation-1"></a><a class="docs-heading-anchor-permalink" href="#Speckle-Generation" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FluxOptics.Modes.generate_speckle" href="#FluxOptics.Modes.generate_speckle"><code>FluxOptics.Modes.generate_speckle</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">generate_speckle(ns, ds, λ, NA; envelope=nothing, center=(0,0), t=Id2D(), normalize=true)</code></pre><p>Generate random speckle pattern with controlled numerical aperture.</p><p>Creates a complex random field with Fourier components limited by the numerical aperture, producing realistic speckle with controlled correlation length.</p><p><strong>Arguments</strong></p><ul><li><code>ns</code>: Grid dimensions - (nx,) for 1D, (nx, ny) for 2D, (nx, ny, nz) for 3D</li><li><code>ds</code>: Pixel sizes - (dx,), (dx, dy), or (dx, dy, dz)</li><li><code>λ</code>: Wavelength</li><li><code>NA</code>: Numerical aperture controlling speckle size</li><li><code>envelope=nothing</code>: Optional envelope function (Mode type)</li><li><code>center=(0,0)</code>: Center position for envelope</li><li><code>t=Id2D()</code>: Coordinate transformation for envelope</li><li><code>normalize=true</code>: Normalize the speckle distribution to unit power</li></ul><p><strong>Returns</strong></p><p>Complex array with random speckle pattern.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; speckle = generate_speckle((64, 64), (1.0, 1.0), 1.064, 0.1);

julia&gt; isapprox(sum(abs2, speckle), 1)
true

julia&gt; envelope = Gaussian(20.0);

julia&gt; speckle_env = generate_speckle((64, 64), (1.0, 1.0), 1.064, 0.1; envelope=envelope);

julia&gt; isapprox(sum(abs2, speckle_env), 1)
true

julia&gt; speckle_1d = generate_speckle((128,), (0.5,), 1.064, 0.2);

julia&gt; isapprox(sum(abs2, speckle_1d) * 0.5, 1)
true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/anscoil/FluxOptics.jl/blob/87b5c0c2a01b36b3301ef5f08d149dcaccb07d0c/src/modes/speckle_generator.jl#L1-L41">source</a></section></article><h2 id="Technical-Notes"><a class="docs-heading-anchor" href="#Technical-Notes">Technical Notes</a><a id="Technical-Notes-1"></a><a class="docs-heading-anchor-permalink" href="#Technical-Notes" title="Permalink"></a></h2><h3 id="Mode-Normalization"><a class="docs-heading-anchor" href="#Mode-Normalization">Mode Normalization</a><a id="Mode-Normalization-1"></a><a class="docs-heading-anchor-permalink" href="#Mode-Normalization" title="Permalink"></a></h3><ul><li>All modes are normalized to unit power by default</li><li>Power = ∫∫ |u(x,y)|² dx dy = 1</li><li>For custom normalization, use <code>norm_constant</code> parameter</li></ul><h3 id="Mode-Propagation"><a class="docs-heading-anchor" href="#Mode-Propagation">Mode Propagation</a><a id="Mode-Propagation-1"></a><a class="docs-heading-anchor-permalink" href="#Mode-Propagation" title="Permalink"></a></h3><ul><li>Use <code>λ</code> and <code>z</code> parameters for Gaussian beam propagation</li><li>Includes Gouy phase shift</li><li><code>constant_phase=true</code> includes exp(ikz) term</li></ul><h3 id="Layout-Centering"><a class="docs-heading-anchor" href="#Layout-Centering">Layout Centering</a><a id="Layout-Centering-1"></a><a class="docs-heading-anchor-permalink" href="#Layout-Centering" title="Permalink"></a></h3><ul><li>Layouts are centered at (0, 0) by default</li><li>Use coordinate transformations to shift layouts</li></ul><h3 id="Speckle-Statistics"><a class="docs-heading-anchor" href="#Speckle-Statistics">Speckle Statistics</a><a id="Speckle-Statistics-1"></a><a class="docs-heading-anchor-permalink" href="#Speckle-Statistics" title="Permalink"></a></h3><ul><li>Correlation length ≈ λ / NA</li><li>High NA → fine speckle (small correlation length)</li><li>Low NA → coarse speckle (large correlation length)</li><li>Speckle is fully developed (unit contrast) without envelope</li></ul><h2 id="See-Also"><a class="docs-heading-anchor" href="#See-Also">See Also</a><a id="See-Also-1"></a><a class="docs-heading-anchor-permalink" href="#See-Also" title="Permalink"></a></h2><ul><li><a href="../../gridutils/">GridUtils</a> for coordinate systems</li><li><a href="../../fields/">Fields</a> for ScalarField operations</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Modes</a><a class="docs-footer-nextpage" href="../../fields/">Fields »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.15.0 on <span class="colophon-date" title="Thursday 23 October 2025 18:52">Thursday 23 October 2025</span>. Using Julia version 1.11.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
